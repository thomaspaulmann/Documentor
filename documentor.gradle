def getExclude() {
    return hasProperty('DOCUMENTOR_EXCLUDE') ? DOCUMENTOR_EXCLUDE : ""
}

task generateJavadoc(type: Javadoc) {
    println "#####################################"
    println "# Start generating Javadoc"
    println "#"

    // Javadoc
    source         = android.sourceSets.main.java.srcDirs
    destinationDir = file("../javadoc/")
    classpath     += project.files(android.getBootClasspath().join(File.pathSeparator))
    group          = "javadoc"

    // Options
    options {
        links("http://docs.oracle.com/javase/7/docs/api/")
        linksOffline("http://d.android.com/reference", "${android.sdkDirectory}/docs/reference")

        if (JavaVersion.current().isJava8Compatible()) {
            addStringOption('Xdoclint:none', '-quiet')
        }
    }

    println "# Excluded files from javadoc"
    println "# - " + getExclude()

    // Exclude Android specific files
    exclude '**/BuildConfig.java', '**/R.java'
    exclude getExclude()

    println "# "
    println "# Finished generating Javadoc"
    println "#####################################"
}
